## Smart energihantering
HACS-paket f√∂r Home Assistant som optimerar din Huawei-batteriinstallation och solpaneler.
Styr laddningen automatiskt baserat p√• elpriser, batteriets status och solprognos f√∂r att maximera egenanv√§ndningen.
Paketet g√∂r √§ven f√∂ljande:

- Begr√§nsar solelexport vid negativa elpriser
- F√∂rhindrar att din elbil laddas fr√•n hemmabatteriet
- S√§ljer batteri√∂verskott n√§r det √§r ekonomiskt l√∂nsamt

<img width="1850" height="742" alt="Sk√§rmbild 2025-10-11 163741" src="https://github.com/user-attachments/assets/8c306b50-f229-4a00-bfe9-e61b41ed0f2f" />

## Installation
### Steg 1
Installera och konfigurera [Huawei Solar Integrationen](https://github.com/wlcrs/huawei_solar)

<a href="https://my.home-assistant.io/redirect/config_flow_start/?domain=huawei_solar" target="_blank" rel="noreferrer noopener"><img src="https://my.home-assistant.io/badges/config_flow_start.svg" alt="Open your Home Assistant instance and start setting up a new integration." /></a>

### Steg 2
Installera och konfigurera [SMHI Integrationen](https://www.home-assistant.io/integrations/smhi/)
L√§gg till din plats och namnge din nya sensor home (vilket ger f√∂ljande enhetsnamn weather.smhi_home) 

<a href="https://my.home-assistant.io/redirect/config_flow_start/?domain=smhi" target="_blank" rel="noreferrer noopener"><img src="https://my.home-assistant.io/badges/config_flow_start.svg" alt="Open your Home Assistant instance and start setting up a new integration." /></a>

### Steg 3
Installera f√∂ljande integrationer fr√•n HACS (f√∂r att aktivera konfigurationsvyn):

- Apexcharts-card
- Layout-card
- Vertical-stack-in-card
- Energy-flow-card-plus

Har du inte HACS?
F√∂lj instruktionerna [h√§r](https://www.hacs.xyz/docs/use/configuration/basic/)

### Steg 4
L√§gg till f√∂ljande rad i din configuration.yaml

```yml
homeassistant:
  packages: !include_dir_named packages
```


> [!IMPORTANT]
> Observera indraget och att det ska vara placerad direkt under Home Assistant som ska ligga h√∂gst upp i din fil. 

> [!NOTE]
> Ladda ner file editor (till√§gg) f√∂r att kunna redigera din configuration.yaml p√• ett enkelt s√§tt. Detta g√∂r du via inst√§llningar (kugghjulet till v√§nster), v√§lj sen till√§gg. Klicka p√• till√§ggsbutik och s√∂k (h√∂gst upp) efter file editor. Installera och start sen file editor genom att klicka p√• √∂ppna webbgr√§nsnitt.
>
> https://www.home-assistant.io/addons/

> [!WARNING]
> Om packges inte ligger direkt under homeassistant och h√∂gst upp i din fil kommer du inte kunna ladda ner paketet.

<img width="1028" height="588" alt="Sk√§rmbild 2025-10-27 092254" src="https://github.com/user-attachments/assets/b1f80a61-6d04-44c1-9654-c9106dc91ac0" />
<img width="439" height="86" alt="Sk√§rmbild 2025-10-27 092414" src="https://github.com/user-attachments/assets/d40c3051-d78c-4681-8ec6-17749f93876a" />


### Steg 5
Skapa en mapp p√• samma plats som din configuration.yaml-fil och namnge den packages.
<img width="874" height="233" alt="Sk√§rmbild 2025-10-27 092730" src="https://github.com/user-attachments/assets/585a1d74-9e17-4c5e-a527-0015f89531fb" />

Klicka p√• mappen f√∂r att komma till dina filer

<img width="333" height="133" alt="Sk√§rmbild 2025-10-27 093712" src="https://github.com/user-attachments/assets/b9b0601c-cbbc-4d23-8273-18efc1e1fa96" />

Klicka p√• mappen med ett plus och skriv in packages.

### Steg 6
a) Leta upp din nya mapp (packages) i listan och g√• in i den. Skapa en ny mapp som du ger namnet sem (samma princip som i steg 5)

b) Ladda ner och packa upp inneh√•llet fr√•n github p√• din dator. Klicka p√• l√§nken nedan f√∂r att ladda ner inneh√•llet.  

https://github.com/Henrik1986/huawei-energy-managment/archive/fb39a1732d69ab12b96c7f657dad6f1d15df60d1.zip

c) Ladda upp inneh√•llet som ligger i mappen setup (fr√•n din dator) till mappen sem p√• din home assistant. 

<img width="335" height="129" alt="Sk√§rmbild 2025-10-27 093414" src="https://github.com/user-attachments/assets/50f36441-a096-4e2b-8d76-980f5de2007e" />

Viktigt att du √§r inne i mappen sem. 

### Steg 7
Starta om Home Assistant

### Steg 8
Skapa en ny vy i Home Assistant genom att klicka p√• pennikonen uppe till h√∂ger och sedan p√• plus-tecknet (+).
I dialogrutan som visas, klicka p√• de tre prickarna uppe till h√∂ger och v√§lj Redigera i YAML.
Klistra sedan in inneh√•llet fr√•n filen admin_vy.yaml h√§r p√• Github. 

### Steg 9
Klicka in p√• din nya vy (bli inte orolig om den ser ofullst√§ndig ut - det √§r normalt). G√∂r ett l√•ngtryck (h√•ll inne och sl√§pp) p√• knappen inst√§llningar. G√∂r l√•ngtrycket p√• texten inte p√• ikonen. Klicka p√• uppdatera f√∂r att f√• hem hela paketet till din Home Assistant. Ikonen kommer att aktiveras i n√•gra sekunder f√∂r att sen inaktiveras. N√§r den inaktiverats (blivit gr√•) har du ladda ner paketet och kan g√• vidare till steg 10. 

> [!NOTE]
> Skulle du vilja uppdatera paketet manuellt kan du g√∂ra det p√• denna knapen uppdatera. 

### Steg 10
Starta om Home Assistant och nu kan du starta konfigurationen genom att g√∂ra ett l√•ngt tryck (h√•ll inne och sl√§pp) p√• texten inst√§llningar och v√§lja Starta konfigurationen. G√∂r du ett vanligt klick p√• inst√§llningar f√•r du fram en meny med inst√§llningar som kan vara bra att n√• n√§r du √§r ig√•ng. 

> [!NOTE]
> F√∂r att f√• full funktionallitet beh√∂ver du en nyckel. Det finns nycklar som ger dig tillg√•ng till systemet i 30 dagar. D√§refter kostar en anv√§ndarkod 349 kr/√•r. 

> [!NOTE]
> Om n√•got kort inte fungerar som det ska beror det troligtvis p√• att fel enhet √§r inst√§lld. 

## Uppdateringar :loudspeaker:
Via denna sida kommer du kunna l√§sa om nya funktioner som lagt till vid varje realese. D√§r kommer det framg√• om du beh√∂ver t√§nka p√• n√•got innan du uppdaterar paketet. 

> [!NOTE]
> F√∂r att nya funktioner ska bli tillg√§ngliga hos dig kr√§vs en omstart av Home Assistant. 

## Framtida funktioner :raising_hand:
Har du id√©er p√• nya funktioner? L√§mna g√§rna dina f√∂rslag p√• GitHub under ‚ÄùDiscussions‚Äù.

## Problem :bug:
Uppt√§cker du n√•got problem? Rapportera det g√§rna p√• GitHub under ‚ÄùIssues‚Äù.

## St√∂tta mitt arbete üöÄ
Ditt st√∂d g√∂r det m√∂jligt f√∂r mig att forts√§tta f√∂rb√§ttra paketet, optimera funktioner och l√§gga till nya smarta funktioner i framtiden.

<a href="https://www.buymeacoffee.com/henrikakere" target="https://buymeacoffee.com/henrikakere"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: 41px !important;width: 174px !important;box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 3px 2px 0px rgba(190, 190, 190, 0.5) !important;" ></a>
